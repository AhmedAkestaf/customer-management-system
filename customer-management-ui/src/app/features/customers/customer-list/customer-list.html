<!-- Header Section -->
<div class="page-header">
  <div class="header-content">
    <div>
      <h2 class="page-title">
        <i class="bi bi-people-fill"></i> Customer Management
      </h2>
      <p class="page-subtitle">Manage your customer database efficiently</p>
    </div>
    <a routerLink="/customers/new" class="btn btn-primary btn-lg shadow-sm">
      <i class="bi bi-plus-circle me-2"></i> Add Customer
    </a>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid" *ngIf="!loading()">
    <div class="stat-card">
      <div class="stat-icon bg-primary">
        <i class="bi bi-people"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ customers().length }}</div>
        <div class="stat-label">Total Customers</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon bg-success">
        <i class="bi bi-check-circle"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ customers().length }}</div>
        <div class="stat-label">Active</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon bg-info">
        <i class="bi bi-graph-up"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">+5</div>
        <div class="stat-label">New This Month</div>
      </div>
    </div>
  </div>
</div>

<!-- Search Bar -->
<div class="search-section" *ngIf="!loading() && customers().length > 0">
  <div class="search-box">
    <i class="bi bi-search search-icon"></i>
    <input
      type="text"
      class="form-control form-control-lg"
      placeholder="Search by name, email, or address..."
      (input)="onSearchChange($event)"
    />
  </div>
</div>

<!-- Loading State -->
<app-loading-spinner *ngIf="loading()"></app-loading-spinner>

<!-- Error State -->
<div *ngIf="error()" class="alert alert-danger alert-dismissible fade show shadow-sm">
  <i class="bi bi-exclamation-triangle me-2"></i>
  <strong>Error!</strong> {{ error() }}
  <button type="button" class="btn-close" (click)="error.set(null)"></button>
</div>

<!-- Empty State -->
<app-empty-state
  *ngIf="!loading() && customers().length === 0 && !error()"
  icon="bi-inbox"
  title="No Customers Yet"
  message="Start by adding your first customer to the system."
>
  <a routerLink="/customers/new" class="btn btn-primary mt-3">
    <i class="bi bi-plus-circle me-2"></i> Add Your First Customer
  </a>
</app-empty-state>

<!-- Customer Grid -->
<div *ngIf="!loading() && filterCustomers().length > 0" class="customer-grid">
  <div *ngFor="let customer of filterCustomers()" class="customer-card">
    <div class="card-header-custom">
      <div class="customer-avatar">
        {{ customer.name.charAt(0).toUpperCase() }}
      </div>
      <div class="customer-info">
        <h5 class="customer-name">{{ customer.name }}</h5>
        <p class="customer-email">
          <i class="bi bi-envelope me-1"></i> {{ customer.email }}
        </p>
      </div>
    </div>

    <div class="card-body-custom">
      <div class="info-row">
        <i class="bi bi-geo-alt text-primary"></i>
        <span>{{ customer.address }}</span>
      </div>
      <div class="info-row">
        <i class="bi bi-calendar text-success"></i>
        <span>{{ customer.dateOfBirth }}</span>
      </div>
    </div>

    <div class="card-actions">
      <a [routerLink]="['/customers', customer.id]" class="btn btn-sm btn-outline-info">
        <i class="bi bi-eye"></i> View
      </a>
      <a [routerLink]="['/customers', customer.id, 'edit']" class="btn btn-sm btn-outline-warning">
        <i class="bi bi-pencil"></i> Edit
      </a>
      <button (click)="deleteCustomer(customer.id, customer.name)" class="btn btn-sm btn-outline-danger">
        <i class="bi bi-trash"></i> Delete
      </button>
    </div>
  </div>
</div>

<!-- No Search Results -->
<app-empty-state
  *ngIf="!loading() && customers().length > 0 && filterCustomers().length === 0"
  icon="bi-search"
  title="No Results Found"
  message="Try adjusting your search terms."
></app-empty-state>
